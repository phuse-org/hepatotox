---
title: "Figure 5 Sample Data"
author: "Dimple K Patel"
date: "2025-04-27"
output: html_document
---

```{r}

#Download appropriate libraries.----
library(dplyr)
library(tidyr)
library(shiny)
library(ggplot2)
library(patchwork)
library(magrittr)

set.seed(123)

#Simulate biomarker data.----
patients <- 1:200
study_days <- c(-28, -14, 0, 14, 28, 56, 70, 84)

biomarker_data <- expand.grid(
  PatientID = patients,
  StudyDay = study_days
)

biomarker_data <- biomarker_data %>%
  mutate(
    ALT_SGPT = runif(n(), 0.8, 10),
    AST_SGOT = runif(n(), 0.8, 9),
    Alkaline_Phosphatase = runif(n(), 0.8, 2),
    GGT = runif(n(), 0.8, 12),
    Total_Bilirubin = runif(n(), 0.8, 2)
  )

biomarker_long <- pivot_longer(biomarker_data, 
                                cols = -c(PatientID, StudyDay), 
                                names_to = "Marker", 
                                values_to = "Value")

#Simulate AE data.----
ae_names <- c("Treatment 1", "Nasopharyngitis", "Hepatic Function Abnormal", "Gastritis")
ae_colors <- c("green", "gray", "pink", "gray")

generate_ae_data <- function(patient_id) {
  n_events <- sample(1:4, 1)
  selected <- sample(seq_along(ae_names), n_events)
  data.frame(
    PatientID = patient_id,
    AE = ae_names[selected],
    StartDay = sample(1:70, n_events),
    Duration = sample(5:30, n_events),
    Color = ae_colors[selected]
  ) %>%
    mutate(EndDay = StartDay + Duration)
}

ae_data <- do.call(rbind, lapply(patients, generate_ae_data))

```

