---
author: "Dimple K Patel"
date: "2025-02-20"
output: html_document
---

```{r}
library(dplyr)
library(random.cdisc.data)
library(tidyverse)
library(magrittr)
library(tern)
library(rtables)
library(r2rtf)
library(formatters)

adslf4 <- radsl(N = 2100, study_duration = 1, seed = 1)
adae <- radae(adslf4, seed = 1)

adaepla <- adae %>% filter(ACTARMCD %in% "ARM B")
adaet1a <- adae %>% filter(ACTARMCD %in% "ARM A")
adaet2a <- adae %>% filter(ACTARMCD %in% "ARM C")

adaeplb <- adaepla %>% 
  mutate(SMQ01NAM = sample(x = c("ALANINE AMINOTRANSFERASE INCREASED", "HEPATIC ENZYME INCREASED",    "ASPARTATE AMINOTRANSFERASE INCREASED", "LIVER FUNCTION TEST ABNORMAL", "GAMMA-GLUTAMYLTRANSFERASE INCREASED", "HEPATIC FUNCTION ABNORMAL", "LIVER DISORDER", 
"HEPATIC STEATOSIS", "BLOOD BILIRUBIN INCREASED", ""), prob = c(0.006, 0.001, .004, .001, .001, 0.0012, .0018, .006, .001, .977), n(), replace = TRUE)) 
  
adaet1b <- adaet1a %>% 
  mutate(SMQ01NAM = sample(x = c("ALANINE AMINOTRANSFERASE INCREASED", "HEPATIC ENZYME INCREASED",    "ASPARTATE AMINOTRANSFERASE INCREASED", "LIVER FUNCTION TEST ABNORMAL", "GAMMA-GLUTAMYLTRANSFERASE INCREASED", "HEPATIC FUNCTION ABNORMAL", "LIVER DISORDER", 
"HEPATIC STEATOSIS", "BLOOD BILIRUBIN INCREASED", ""), prob = c(0.014, 0.005, .008, .005, .002, .003, .001, .006, .0013, .9502), n(), replace = TRUE)) 

adaet2b <- adaet2a %>% 
  mutate(SMQ01NAM = sample(x = c("ALANINE AMINOTRANSFERASE INCREASED", "HEPATIC ENZYME INCREASED",    "ASPARTATE AMINOTRANSFERASE INCREASED", "LIVER FUNCTION TEST ABNORMAL", "GAMMA-GLUTAMYLTRANSFERASE INCREASED", "HEPATIC FUNCTION ABNORMAL", "LIVER DISORDER", 
"HEPATIC STEATOSIS", "BLOOD BILIRUBIN INCREASED", ""), prob = c(0.014, 0.002, .01, .005, .005, .001, .001, .005, .002, .955), n(), replace = TRUE)) 

#Combine all 3 treatment arms for complete ADAE dataset.
adaef4 <- rbind(adaeplb, adaet1b, adaet2b)

#Set working directory
setwd("C:/Users/Dimple/Desktop/PHUSE/PHUSE Hepatotoxicity White Paper/")  

#Save data frame
save(adaef4, file = "adaef4.Rda")          
save(adslf4, file = "adslf4.Rda")   

```
